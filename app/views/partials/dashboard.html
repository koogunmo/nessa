<div id="dashboard">
	<div class="alert alert-warning" ng-if="unmatched!=0">
		There are <a ui-sref="shows.match" class="alert-link">unmatched shows</a> that need updating
	</div>
	<div class="alert alert-warning hidden-xs" ng-if="!notifications">
		<a href="#" ng-click="enableAlerts()" class="alert-link">Enable desktop notifications</a>
	</div>
	
	<div class="row">
		<div class="col-sm-6" ng-if="latest.length>=1">
			<div class="page-header">
				<h3>Last 7 days</h3>
			</div>
			<div>
				<div class="panel" ng-class="{'panel-success': episode.watched, 'panel-warning': !episode.watched}" ng-repeat="episode in latest | orderBy:['airdate','show_name']:true" ng-controller="episodeCtrl">
					<div class="panel-heading">
						<span class="fa fa-lg pull-right" ng-class="{'fa-angle-down': collapsed, 'fa-angle-up': !collapsed}" ng-click="collapsed=!collapsed"></span>
						<h4 class="panel-title">
							<a href="/shows/{{episode.tvdb}}">{{episode.show_name}}</a> <span class="small">{{episode.title}}</span>
						</h4>
					</div>
					<div class="panel-body" collapse="collapsed">
						<div><strong>Season {{episode.season}}, Episode {{episode.episode}}</strong> <span class="small">{{episode.airdate*1000 | date:'dd MMMM yyyy'}}</span></div>
						<p>{{episode.synopsis}}</p>
						<div class="tools">
							<span class="fa fa-lg fa-eye" title="Episode has been watched" ng-if="episode.watched" ng-click="watched()"></span>
							<span class="fa fa-lg fa-eye-slash" title="Episode has not been watched" ng-if="!episode.watched" ng-click="watched()"></span>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	
		<div class="col-sm-6" ng-if="upcoming.length>=1">
			<div class="page-header">
				<h3>Next 7 days</h3>
			</div>
			<div ng-repeat="day in upcoming">
				<div class="panel panel-default date">
					<div class="panel-heading">
						<h4 class="panel-title">{{day.date|moment:'dddd Do MMMM'}}</h4>
					</div>
				</div>
				<div class="panel panel-info" ng-repeat="episode in day.episodes" ng-controller="episodeCtrl">
					<div class="panel-heading">
						<span class="fa fa-lg pull-right" ng-class="{'fa-angle-down': collapsed, 'fa-angle-up': !collapsed}" ng-click="collapsed=!collapsed"></span>
						<h4 class="panel-title"><a href="/shows/{{episode.show.tvdb_id}}">{{episode.show.title}}</a> <span class="small">{{episode.episode.title}}</span></h4>
					</div>
					<div class="panel-body" collapse="collapsed">
						<div><strong>Season {{episode.episode.season}}, Episode {{episode.episode.number}}</strong></div>
						<p>{{episode.episode.overview}}</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="panel panel-primary">
		<div class="panel-heading">
			<h4 class="panel-title">System details</h4>
		</div>
		<div class="panel-body">
			<div>Version: {{stats.version}}</div>
			<div ng-switch="uptime.days">
				Uptime: 
				<span ng-switch-when="1">{{uptime.days}} day</span>
				<span ng-switch-default>{{uptime.days}} days</span>
				<span>{{uptime.hour|zeroPad}}:{{uptime.mins|zeroPad}}:{{uptime.secs|zeroPad}}</span>
			</div>
			<hr />
			<div ng-if="stats.disks">
				<div ng-repeat="disk in stats.disks">
					<span class="pull-right">{{disk.size*1024|formatBytes}}</span>
					<span>{{disk.mount}}</span>
					<progress animate="false" title="">
						<bar type="danger" value="disk.capacity*100">{{disk.used*1024|formatBytes}}</bar>
						<bar type="success" value="100-(disk.capacity*100)">{{disk.available*1024|formatBytes}}</bar>
					</progress>
				</div>
			</div>
		</div>
	</div>
	
</div>